<script>
    function toggleDisplay(id) {
        const e = document.getElementById(id)
        e.style.display = e.style.display === 'block' ? 'none' : 'block'
    }
</script>

{% set navPages = collections.all | eleventyNavigation %}
{% set menuLeafClass = "block p-0 hover:bg-white cursor-pointer rounded-sm" %}

<aside class="sticky-menu">
    {%- for categorie in navPages %}
    <div>
        <h5 class="uppercase no-underline">
            {{ categorie.key }}
        </h5>
        <ul>
            {%- for subject in categorie.children %}
            <li>
                {%- if subject.children.length -%}
                    <a onclick="toggleDisplay('{{subject.key|slug}}-menu')" class="{{menuLeafClass}}">
                        {{subject.key}}
                    </a>
                    <ul id="{{subject.key|slug}}-menu" class="pl-2 ml-1 hidden border-l border-black">
                        {%- for article in subject.children -%}
                            <li>
                                <a href="#{{article.key|slug}}" class="{{menuLeafClass}}">{{article.key}}</a>
                            </li>
                        {%- endfor -%}
                    </ul>
                {% else %}
                    <a href="#{{subject.key|slug}}" class="{{menuLeafClass}}">{{subject.key}}</a>
                {% endif %}
            </li>
            {%- endfor %}
        </ul>
    </div>
    {%- endfor %}
</aside>
